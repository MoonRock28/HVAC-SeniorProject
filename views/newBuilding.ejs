<!DOCTYPE html>
<html>
    <head>
        <title>New Building</title>
        <style>
            #map {
                height: 800px;
                width: 800px;
                position: fixed;
                overflow: auto;
            }
            html, body {
                height: 100%;
                margin: 0%;
                padding: 0%;
            }
        </style>
    </head>
    <body>
        <div id="header">
            <img src=""/>
            <h1>HVAC Stewardship Manager</h1>
            <h1>New Building</h1>
        </div>
        <div id="nav">
            <ul>
                <li><a href="/home">Home</a></li>
            </ul>
        </div>

        <form action="/saveBuilding" method="post">
            <div id="details">
                <p>Name:<br>
                    <input type="text" name="name"></p>
            </div>
            <h4>Campus Map:</h4>
            <div id="map"></div>
            <script type="text/javascript">
                let map, marker = undefined;
                function initMap() {
                    map = new google.maps.Map(document.getElementById('map'), {
                        center: {lat: 43.818378, lng: -111.782588}, //byuIdaho Manwaring center
                        zoom: 18
                    });

                    google.maps.event.addListener(map, 'click', function(event) {
                        placeMarker(event.latLng);
                    });
                }
                function placeMarker(location) {
                    if (marker !== undefined) {
                        marker.setMap(null);
                        marker = undefined;
                    }

//                    console.log(JSON.stringify(location));

                    marker = new google.maps.Marker({
                        position: location,
                        map: map
                    });

                    map.setCenter(location);

//                    console.log(location.lat());
                    document.getElementById('formMapLat').value = location.lat() ;
                    document.getElementById('formMapLng').value = location.lng() ;

                }
            </script>
            <script type="text/javascript"
                    src="https://maps.googleapis.com/maps/api/js?key=<MYKEY>&v=3&callback=initMap"
                    async defer></script>
            <input type="hidden" id="formMapLat" name="lat" value="" />
            <input type="hidden" id="formMapLng" name="lng" value="" />

            <input type="submit" value="Save Building"/>
        </form>

        <div id="footer">

        </div>
    </body>
</html>